<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>插件的使用 | codertao</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="了解真相才能获得真正的自由">
    
    <link rel="preload" href="/assets/css/0.styles.9b7d3967.css" as="style"><link rel="preload" href="/assets/js/app.cce02172.js" as="script"><link rel="preload" href="/assets/js/2.032fb0bf.js" as="script"><link rel="preload" href="/assets/js/48.2979bc6b.js" as="script"><link rel="prefetch" href="/assets/js/10.d8f1d890.js"><link rel="prefetch" href="/assets/js/11.39c93d2d.js"><link rel="prefetch" href="/assets/js/12.c2046a5b.js"><link rel="prefetch" href="/assets/js/13.4aa6aba2.js"><link rel="prefetch" href="/assets/js/14.8c348e89.js"><link rel="prefetch" href="/assets/js/15.67da5716.js"><link rel="prefetch" href="/assets/js/16.38de6d77.js"><link rel="prefetch" href="/assets/js/17.de68e383.js"><link rel="prefetch" href="/assets/js/18.ffcb35fb.js"><link rel="prefetch" href="/assets/js/19.c293a8f3.js"><link rel="prefetch" href="/assets/js/20.4ab530a4.js"><link rel="prefetch" href="/assets/js/21.9c537178.js"><link rel="prefetch" href="/assets/js/22.53d48f8d.js"><link rel="prefetch" href="/assets/js/23.054c7aea.js"><link rel="prefetch" href="/assets/js/24.8852dd09.js"><link rel="prefetch" href="/assets/js/25.ac8703c9.js"><link rel="prefetch" href="/assets/js/26.4b01e35e.js"><link rel="prefetch" href="/assets/js/27.1266c52f.js"><link rel="prefetch" href="/assets/js/28.4d1528d3.js"><link rel="prefetch" href="/assets/js/29.ff9a0adf.js"><link rel="prefetch" href="/assets/js/3.c1c781b1.js"><link rel="prefetch" href="/assets/js/30.f6827ee8.js"><link rel="prefetch" href="/assets/js/31.c07bebee.js"><link rel="prefetch" href="/assets/js/32.bf23ad86.js"><link rel="prefetch" href="/assets/js/33.0f46e884.js"><link rel="prefetch" href="/assets/js/34.e0ae61ac.js"><link rel="prefetch" href="/assets/js/35.41b47a1e.js"><link rel="prefetch" href="/assets/js/36.8fc3e8af.js"><link rel="prefetch" href="/assets/js/37.77373176.js"><link rel="prefetch" href="/assets/js/38.638c0158.js"><link rel="prefetch" href="/assets/js/39.bfd41933.js"><link rel="prefetch" href="/assets/js/4.c7abab7a.js"><link rel="prefetch" href="/assets/js/40.c898e595.js"><link rel="prefetch" href="/assets/js/41.f517ff43.js"><link rel="prefetch" href="/assets/js/42.7fccb977.js"><link rel="prefetch" href="/assets/js/43.22016df4.js"><link rel="prefetch" href="/assets/js/44.ea73cc06.js"><link rel="prefetch" href="/assets/js/45.c2128fe1.js"><link rel="prefetch" href="/assets/js/46.576e71f2.js"><link rel="prefetch" href="/assets/js/47.28527204.js"><link rel="prefetch" href="/assets/js/49.64a2e7e2.js"><link rel="prefetch" href="/assets/js/5.5858aec4.js"><link rel="prefetch" href="/assets/js/50.c12dc9fb.js"><link rel="prefetch" href="/assets/js/51.7bf924a9.js"><link rel="prefetch" href="/assets/js/52.731618a8.js"><link rel="prefetch" href="/assets/js/53.0a222970.js"><link rel="prefetch" href="/assets/js/54.e550d080.js"><link rel="prefetch" href="/assets/js/55.1376558e.js"><link rel="prefetch" href="/assets/js/56.523f0205.js"><link rel="prefetch" href="/assets/js/57.60541360.js"><link rel="prefetch" href="/assets/js/58.7df5fa3f.js"><link rel="prefetch" href="/assets/js/59.990c8d89.js"><link rel="prefetch" href="/assets/js/6.afd64bd9.js"><link rel="prefetch" href="/assets/js/60.9dc8f8b9.js"><link rel="prefetch" href="/assets/js/61.47117dc1.js"><link rel="prefetch" href="/assets/js/62.bbd869e3.js"><link rel="prefetch" href="/assets/js/63.84379b47.js"><link rel="prefetch" href="/assets/js/64.22b4e7df.js"><link rel="prefetch" href="/assets/js/7.f60abe3c.js"><link rel="prefetch" href="/assets/js/8.0a248701.js"><link rel="prefetch" href="/assets/js/9.abb5c751.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9b7d3967.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">codertao</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontEnd/basics/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-subitem"><a href="/frontEnd/basics/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-subitem"><a href="/frontEnd/basics/javascript/" class="nav-link">
  JavaScript
</a></li></ul></li><li class="dropdown-item"><h4>
          JS框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontEnd/frame/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/frontEnd/frame/react/" class="nav-link">
  React
</a></li></ul></li><li class="dropdown-item"><h4>
          打包工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontEnd/pack/webpack/" class="nav-link router-link-active">
  Webpack
</a></li><li class="dropdown-subitem"><a href="/frontEnd/pack/vite/" class="nav-link">
  Vite
</a></li></ul></li><li class="dropdown-item"><h4>
          小程序
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/applet/native/" class="nav-link">
  原生
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/dataStructure/" class="nav-link">
  数据结构
</a></div><div class="nav-item"><a href="/share/" class="nav-link">
  优文转载
</a></div><div class="nav-item"><a href="/essay/" class="nav-link">
  随笔
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          日常分享
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mukbang/" class="nav-link">
  吃播集锦
</a></li><li class="dropdown-subitem"><a href="/movies/" class="nav-link">
  电影分享
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/likesandy" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontEnd/basics/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-subitem"><a href="/frontEnd/basics/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-subitem"><a href="/frontEnd/basics/javascript/" class="nav-link">
  JavaScript
</a></li></ul></li><li class="dropdown-item"><h4>
          JS框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontEnd/frame/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/frontEnd/frame/react/" class="nav-link">
  React
</a></li></ul></li><li class="dropdown-item"><h4>
          打包工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frontEnd/pack/webpack/" class="nav-link router-link-active">
  Webpack
</a></li><li class="dropdown-subitem"><a href="/frontEnd/pack/vite/" class="nav-link">
  Vite
</a></li></ul></li><li class="dropdown-item"><h4>
          小程序
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/applet/native/" class="nav-link">
  原生
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/dataStructure/" class="nav-link">
  数据结构
</a></div><div class="nav-item"><a href="/share/" class="nav-link">
  优文转载
</a></div><div class="nav-item"><a href="/essay/" class="nav-link">
  随笔
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          日常分享
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mukbang/" class="nav-link">
  吃播集锦
</a></li><li class="dropdown-subitem"><a href="/movies/" class="nav-link">
  电影分享
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/likesandy" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>webpack</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontEnd/pack/webpack/" aria-current="page" class="sidebar-link">首页</a></li><li><a href="/frontEnd/pack/webpack/default.html" class="sidebar-link">基础打包</a></li><li><a href="/frontEnd/pack/webpack/css.html" class="sidebar-link">CSS打包</a></li><li><a href="/frontEnd/pack/webpack/image.html" class="sidebar-link">资源打包</a></li><li><a href="/frontEnd/pack/webpack/plugin.html" aria-current="page" class="active sidebar-link">插件的使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontEnd/pack/webpack/plugin.html#认识-plugin" class="sidebar-link">认识 Plugin</a></li><li class="sidebar-sub-header"><a href="/frontEnd/pack/webpack/plugin.html#cleanwebpackplugin" class="sidebar-link">CleanWebpackPlugin</a></li><li class="sidebar-sub-header"><a href="/frontEnd/pack/webpack/plugin.html#htmlwebpackplugin" class="sidebar-link">HtmlWebpackPlugin</a></li><li class="sidebar-sub-header"><a href="/frontEnd/pack/webpack/plugin.html#生成-index-html-分析" class="sidebar-link">生成 index.html 分析</a></li><li class="sidebar-sub-header"><a href="/frontEnd/pack/webpack/plugin.html#自定义-html-模板" class="sidebar-link">自定义 HTML 模板</a></li><li class="sidebar-sub-header"><a href="/frontEnd/pack/webpack/plugin.html#自定义模板数据填充" class="sidebar-link">自定义模板数据填充</a></li><li class="sidebar-sub-header"><a href="/frontEnd/pack/webpack/plugin.html#defineplugin-的介绍" class="sidebar-link">DefinePlugin 的介绍</a></li><li class="sidebar-sub-header"><a href="/frontEnd/pack/webpack/plugin.html#defineplugin-的使用" class="sidebar-link">DefinePlugin 的使用</a></li><li class="sidebar-sub-header"><a href="/frontEnd/pack/webpack/plugin.html#copywebpackplugin" class="sidebar-link">CopyWebpackPlugin</a></li><li class="sidebar-sub-header"><a href="/frontEnd/pack/webpack/plugin.html#mode-配置" class="sidebar-link">Mode 配置</a></li></ul></li><li><a href="/frontEnd/pack/webpack/babel.html" class="sidebar-link">Babel</a></li><li><a href="/frontEnd/pack/webpack/vue.html" class="sidebar-link">处理Vue</a></li><li><a href="/frontEnd/pack/webpack/server.html" class="sidebar-link">devServer</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="认识-plugin"><a href="#认识-plugin" class="header-anchor">#</a> 认识 Plugin</h2> <ul><li>Webpack 的另一个核心是 Plugin，官方有这样一段对 Plugin 的描述：
<ul><li>While loaders are used to transform certain types of modules, plugins can be leveraged to perform a
wider range of tasks like bundle optimization, asset management and injection of environment
variables.</li></ul></li> <li>上面表达的含义翻译过来就是：
<ul><li>Loader 是用于<strong>特定的模块类型</strong>进行转换；</li> <li>Plugin 可以用于<strong>执行更加广泛的任务</strong>，比如打包优化、资源管理、环境变量注入等；</li></ul></li></ul> <h2 id="cleanwebpackplugin"><a href="#cleanwebpackplugin" class="header-anchor">#</a> CleanWebpackPlugin</h2> <ul><li>前面我们演示的过程中，每次修改了一些配置，重新打包时，都需要<strong>手动删除 dist 文件夹</strong>：
<ul><li>我们可以借助于一个插件来帮助我们完成，这个插件就是<strong>CleanWebpackPlugin</strong>；</li></ul></li> <li>首先，我们先安装这个插件：</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> clean-webpack-plugin -D
</code></pre></div><ul><li>之后在插件中配置：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;clean-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 其他地方省略</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="htmlwebpackplugin"><a href="#htmlwebpackplugin" class="header-anchor">#</a> HtmlWebpackPlugin</h2> <ul><li>另外还有一个不太规范的地方：
<ul><li>我们的 HTML 文件是编写在根目录下的，而最终打包的 <strong>dist 文件夹中是没有 index.html 文件</strong>的。(事实上我们根目录是不需要 index.html 文件,以外这个插件内部有一个 ejs 模板会帮我们渲染出来,这涉及到源码的知识,后期阅读源码的时候再来进行讲解)</li> <li>在<strong>进行项目部署</strong>的时，必然也是需要<strong>有对应的入口文件 index.html</strong>；</li> <li>所以我们也需要<strong>对 index.html 进行打包处理</strong>;</li></ul></li> <li>对 HTML 进行打包处理我们可以使用另外一个插件：<strong>HtmlWebpackPlugin</strong>；</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> html-webpack-plugin -D
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 其它省略</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="/frontEnd/pack/webpack/9.png" alt=""></p> <h2 id="生成-index-html-分析"><a href="#生成-index-html-分析" class="header-anchor">#</a> 生成 index.html 分析</h2> <ul><li>我们会发现，现在自动在 dist 文件夹中，生成了一个 index.html 的文件：
<ul><li>该文件中也自动添加了我们打包的 bundle.js 文件；</li></ul></li> <li>这个文件是如何生成的呢？
<ul><li>默认情况下是根据<strong>ejs 的一个模板</strong>来生成的；</li> <li>在 html-webpack-plugin 的源码中，有一个 default_index.ejs 模块；</li></ul></li></ul> <h2 id="自定义-html-模板"><a href="#自定义-html-模板" class="header-anchor">#</a> 自定义 HTML 模板</h2> <ul><li>如果我们想在自己的模块中加入一些比较特别的内容：
<ul><li>比如添加一个 noscript 标签，在用户的 JavaScript 被关闭时，给予响应的提示；</li> <li>比如在开发 vue 或者 react 项目时，我们需要一个可以挂载后续组件的根标签 ；</li></ul></li> <li>这个我们需要一个属于自己的 index.html 模块：</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- public/index.html --&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width,initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>&lt;%= BASE_URL %&gt;favicon.ico<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>
      &lt;%= htmlWebpackPlugin.options.title %&gt;
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>noscript</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span>
        <span class="token punctuation">&gt;</span></span>We're sorry but &lt;%= htmlWebpackPlugin.options.title %&gt; doesn't work
        properly without JavaScript enabled. Please enable it to
        continue.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span>
      <span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>noscript</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="自定义模板数据填充"><a href="#自定义模板数据填充" class="header-anchor">#</a> 自定义模板数据填充</h2> <ul><li>上面的代码中，会有一些类似这样的语法&lt;% 变量 %&gt;，这个是 EJS 模块填充数据的方式。</li> <li>在配置 HtmlWebpackPlugin 时，我们可以添加如下配置：
<ul><li>template：指定我们要使用的模块所在的路径；</li> <li>title：在进行 htmlWebpackPlugin.options.title 读取时，就会读到该信息；</li></ul></li></ul> <h2 id="defineplugin-的介绍"><a href="#defineplugin-的介绍" class="header-anchor">#</a> DefinePlugin 的介绍</h2> <ul><li>但是，这个时候编译还是会报错，因为在我们的模块中还使用到一个 <strong>BASE_URL 的常量</strong>：</li></ul> <p><img src="/frontEnd/pack/webpack/10.png" alt=""></p> <ul><li>这是因为在编译 template 模块时，有一个 BASE_URL：
<ul><li>但是我们并没有设置过这个常量值，所以会出现没有定义的错误；</li></ul></li> <li>这个时候我们可以使用 DefinePlugin 插件；</li></ul> <h2 id="defineplugin-的使用"><a href="#defineplugin-的使用" class="header-anchor">#</a> DefinePlugin 的使用</h2> <ul><li>DefinePlugin 允许在编译时创建配置的全局常量，是一个 webpack 内置的插件（不需要单独安装）：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> DefinePlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 其他省略</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token constant">BASE_URL</span><span class="token operator">:</span> <span class="token string">&quot;'./'&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>这个时候，编译 template 就可以正确的编译了，会读取到 <strong>BASE_URL</strong> 的值；</li></ul> <h2 id="copywebpackplugin"><a href="#copywebpackplugin" class="header-anchor">#</a> CopyWebpackPlugin</h2> <ul><li>在 vue 的打包过程中，如果我们将一些文件<strong>放到 public 的目录</strong>下，那么这个目录会<strong>被复制到 dist 文件夹中</strong>。
<ul><li>这个复制的功能，我们可以使用 CopyWebpackPlugin 来完成；</li></ul></li> <li>安装 CopyWebpackPlugin 插件：</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> copy-webpack-plugin -D
</code></pre></div><ul><li>接下来配置 CopyWebpackPlugin 即可：
<ul><li>复制的规则在 patterns 中设置；</li> <li>from：设置从哪一个源中开始复制；</li> <li>to：复制到的位置，可以省略，会默认复制到打包的目录下；</li> <li>globOptions：设置一些额外的选项，其中可以编写需要忽略的文件：
<ul><li>index.html：也不需要复制，因为我们已经通过 HtmlWebpackPlugin 完成了 index.html 的生成；</li></ul></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> CopyWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;copy-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 其他的省略</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&quot;public&quot;</span><span class="token punctuation">,</span>
          <span class="token comment">// 可以不写,默认会根据你上面的配置来读取</span>
          <span class="token comment">// to: &quot;./&quot;,</span>
          <span class="token comment">// 忽略配置</span>
          globOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
            ignore<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;**/index.html&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="/frontEnd/pack/webpack/11.png" alt=""></p> <p><img src="/frontEnd/pack/webpack/12.png" alt=""></p> <h2 id="mode-配置"><a href="#mode-配置" class="header-anchor">#</a> Mode 配置</h2> <ul><li>前面我们一直没有讲 mode。</li> <li>Mode 配置选项，可以告知 webpack 使用响应模式的内置优化：
<ul><li>默认值是 production（什么都不设置的情况下）；</li> <li>可选值有：'none' | 'development' | 'production'；</li></ul></li> <li>这几个选项有什么样的区别呢?</li></ul> <p>比如我们在 element.js 文件中打印 codertao.lenght,这个肯定是要<strong>报错</strong>的</p> <p><img src="/frontEnd/pack/webpack/13.png" alt=""></p> <p>在开发中我们进行调式遇到这样的错误我们是很难找到错误发生的位置的</p> <p>有人会说诶这里不是说了吗,在 bundle.js 文件中的第一行</p> <p>bundle.js 文件是被打包压缩过的,我们点进去以后是看不懂的,所以很难找到出现错误的位置</p> <ul><li>如果开发中想要详细找到 bug 的位置,我们可以通过 webpack 的配置的 mode</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 设置模式</span>
<span class="token comment">// development 开发阶段,会设置development</span>
<span class="token comment">// production 准备打包上线的时候,设置production</span>
mode<span class="token operator">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>
</code></pre></div><p>那么我们就可以找到 bug 出现的位置</p> <p><img src="/frontEnd/pack/webpack/14.png" alt=""></p> <p><img src="/frontEnd/pack/webpack/15.png" alt=""></p> <ul><li>如果觉得还是不够详细,因为点开文件发现上面有一些打包后乱七八糟看不懂的代码</li> <li>如果想出现错误,点击错误进入原文件进行查看的话.可以再配置一个 devtool</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 设置source-map,建立js映射文件,方便调试代码和错误</span>
devtool<span class="token operator">:</span> <span class="token string">'source-map'</span><span class="token punctuation">,</span>
</code></pre></div><p><img src="/frontEnd/pack/webpack/16.png" alt=""></p> <p><img src="/frontEnd/pack/webpack/17.png" alt=""></p> <p>这样如果开发中有了 bug,我们就可以很方便找到 bug 出现的位置然后进行修改</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021年6月9日星期三上午9点46分</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/frontEnd/pack/webpack/image.html" class="prev">
        资源打包
      </a></span> <span class="next"><a href="/frontEnd/pack/webpack/babel.html">
        Babel
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.cce02172.js" defer></script><script src="/assets/js/2.032fb0bf.js" defer></script><script src="/assets/js/48.2979bc6b.js" defer></script>
  </body>
</html>
